// --- Variables ---
$primary-color: #a98b4f;
$secondary-color: #d1d1d1;
$dark-text: #333333;
$light-text: #ffffff;
$bg-white: #ffffff;
$input-bg: #f7f6f4;
$input-border: #c0bfbf;
$muted: #9b9b9b;

// --- Keyframes ---
@keyframes pulse-glow {
  0% { text-shadow: 0 0 5px rgba($primary-color, 0.15); }
  50% { text-shadow: 0 0 12px rgba($primary-color, 0.28); }
  100% { text-shadow: 0 0 5px rgba($primary-color, 0.15); }
}

@font-face {
  font-family: 'digital-7';
  src: url('/assets/fonts/digital-7/digital-7.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

/* --- Base --- */
.page-container {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  background-color: $bg-white;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  color: $dark-text;
  overflow: hidden;
}

.main-content {
  flex-grow: 1;
  width: 100%;
  padding: 2.5rem 3.5rem;
  display: flex;
  justify-content: flex-start;
  align-items: flex-start;
}

.section-title {
  color: $primary-color;
  font-weight: 700;
  font-size: 2.2rem;
  margin: 0 0 0.75rem 0;
  text-align: left;
  letter-spacing: 0.8px;
}

/* --- Buttons --- */
.btn {
  padding: 0.6rem 1.0rem;
  border: none;
  cursor: pointer;
  font-weight: 700;
  font-size: 0.95rem;
  text-transform: uppercase;
  min-width: 110px;
  border-radius: 4px;
  transition: background-color 0.18s ease, transform 0.12s ease, box-shadow 0.12s ease;

  &.btn-primary {
    background-color: $primary-color;
    color: $light-text;
    &:hover { background-color: darken($primary-color, 6%); transform: translateY(-2px); }
  }
}

/* --- Layout Container --- */
.task-view-container {
  display: flex;
  align-items: flex-start;
  gap: 2rem;
  width: 100%;
  max-width: 1200px;
  margin: 0;
}

.task-sidebar {
  width: 280px;
  flex: 0 0 280px;
}

.left-column-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1.2rem;
  background-color: $input-bg;
  border: 1px solid $input-border;
  padding: 1.25rem;
  border-radius: 8px;
  box-sizing: border-box;
}

.person-logo {
  width: 100%;
  height: auto;
  object-fit: contain;
}

/* --- Task Confirmation Card --- */
.task-details-section {
  flex: 1 1 auto;
  opacity: 0;
  transform: translateY(8px);
  transition: opacity 0.35s ease-out, transform 0.35s ease-out, box-shadow 0.2s ease;

  &.is-visible {
    opacity: 1;
    transform: translateY(0);
    background-color: #ffffff;
    border: 1px solid $input-border;
    padding: 2.25rem;
    border-radius: 10px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.06);
    box-sizing: border-box;
    min-height: 560px;
    max-width: 880px;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: stretch;
    gap: 0.75rem;
  }

  .confirmation-form {
    display: grid;
    grid-template-columns: 36% 64%;
    gap: 1.4rem 2rem;
    align-items: start; // Aligns rows to the top
    width: 100%;
    margin-top: 0.25rem;
  }

  // --- FIX 4: Label Alignment ---
  .labels-box {
    ul { list-style: none; margin: 0; padding: 0; display: flex; flex-direction: column; gap: 1rem; }
    li {
      padding: 0 1.15rem; // Use padding only for left/right
      font-weight: 700;
      color: $dark-text;
      font-size: 0.98rem;
      background: $input-bg;
      border: 1px solid $input-border;
      border-radius: 8px;
      box-sizing: border-box;
      
      // --- Vertically center text ---
      display: flex;
      align-items: center; 
      
      // Match input heights
      &:nth-child(1), // Operation
      &:nth-child(2), // Serial
      &:nth-child(3), // Checkboxes
      &:nth-child(4) { // Small inputs
        height: 52px;
      }
      
      &:nth-child(5) { // Note
        min-height: 180px;
        align-items: flex-start; // Align label to top
        padding-top: 1rem; // Add padding to match textarea
      }
    }
  }
  // -----------------------------

  /* --- Inputs Column --- */
  .inputs-box {
    display: flex;
    flex-direction: column;
    gap: 1rem; // This now matches the labels gap

    .form-row {
      display: block;
      width: 100%;
    }

    select,
    input[type="number"],
    textarea {
      width: 100%;
      padding: 0.95rem 1rem;
      border-radius: 8px;
      border: 1px solid $input-border;
      background: #fff;
      font-size: 1rem;
      color: $dark-text;
      box-sizing: border-box;
      transition: border-color 0.12s ease, box-shadow 0.12s ease;
    }

    select { height: 52px; }
    input[type="number"] { height: 52px; }
    textarea { min-height: 180px; padding-top: 0.9rem; resize: vertical; }

    // --- FIX 1, 2, 3: Checkbox Row ---
    .check-boxes {
      display: flex;
      gap: 1.5rem;
      align-items: center;
      justify-content: flex-start; // Center the checkboxes
      height: 52px; // Match input height
      label {
        display: flex;
        align-items: center;
        gap: 0.5rem; // Space between box and text
        font-weight: 500;
        cursor: pointer;
      }
      
      input[type="checkbox"] {
         width: 16px; // Custom size
         height: 16px;
      }
    }
    // ---------------------------------

    /* grouped smaller inputs side-by-side */
    .small-inputs {
      display: flex;
      gap: 1rem;
      align-items: center;

      .small-field { flex: 1; }

      input { height: 52px; }
    }

    .submit-row {
      display: flex;
      justify-content: flex-start;
      margin-top: 0.25rem;

      .btn { min-width: 120px; }
    }
  }
}

/* Hide/ignore timer column (removed) */
.task-timer-section { display: none; }

/* Focus styles */
select:focus, input:focus, textarea:focus {
  outline: none;
  border-color: $primary-color;
  box-shadow: 0 6px 18px rgba($primary-color, 0.06);
}

/* Responsive */
@media (max-width: 980px) {
  .main-content { padding: 1.25rem; }
  .task-view-container { flex-direction: column; gap: 1.25rem; max-width: 100%; }
  .task-sidebar { width: 100%; flex: 0 0 auto; }
  .task-details-section.is-visible { min-height: auto; max-width: 100%; padding: 1.4rem; }
  
  .task-details-section .confirmation-form { 
    grid-template-columns: 1fr; // Stack labels on top of inputs
  }
  
  .labels-box { 
    order: 1; 
    min-height: auto; 
    ul { gap: 0.5rem; } // Tighter gap on mobile
    
    // --- Mobile label styles ---
    li {
      height: auto !important; // Remove fixed heights
      min-height: auto !important;
      padding: 0.5rem 0.75rem !important; // Smaller padding
      align-items: center !important; // Keep centered
      border: none; // Remove border
      background: none; // Remove bg
      padding-left: 0; // Remove padding
      font-size: 0.9rem;
    }
  }
  
  .inputs-box { 
    order: 2; 
    gap: 0.75rem; // Tighter gap on mobile
  }

  .inputs-box textarea { min-height: 120px; }
  
  // --- Mobile Checkbox Row ---
  .check-boxes {
    height: 48px;
    padding: 0 1rem;
    justify-content: flex-start; // Align left
  }
  
  // --- Mobile Input Row ---
  .small-inputs {
    gap: 0.75rem;
    select, input { height: 48px; }
  }
}